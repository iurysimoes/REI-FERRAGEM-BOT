# ğŸ¤– Projeto WhatsApp Bot - REI FERRAGEM

Bot de atendimento automatizado via WhatsApp, usando a API [whatsapp-web.js](https://wwebjs.dev/) e banco de dados Oracle.

---

## ğŸ“ Estrutura do Projeto
```
back-end/
â”œâ”€â”€ config/
â”‚   â””â”€â”€ db.js                    # ConexÃ£o com Oracle
â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ controllerAntecipado.js
â”‚   â”œâ”€â”€ controllerCadastro.js
â”‚   â”œâ”€â”€ controllerFinanceiro.js
â”‚   â”œâ”€â”€ controllerPedido.js
â”‚   â””â”€â”€ controllerRedirecionamento.js
â”œâ”€â”€ services/
â”‚   â””â”€â”€ atendimentoService.js   # Busca o nÃºmero do atendente por setor
â”œâ”€â”€ router.js                   # Roteia mensagens recebidas
â””â”€â”€ index.js                    # InÃ­cio do bot com whatsapp-web.js
```

---

## âš™ï¸ PrÃ©-requisitos

- Node.js 18+
- Oracle Client instalado (ou Instant Client)
- Banco de dados Oracle ativo com a tabela `atendentes`
- DependÃªncias:
  ```bash
  npm install whatsapp-web.js oracledb qrcode-terminal
  ```

---

## ğŸ—ƒï¸ Exemplo da Tabela `atendentes`

```sql
CREATE TABLE atendentes (
  setor VARCHAR2(50),
  telefone_whatsapp VARCHAR2(20)
);

INSERT INTO atendentes (setor, telefone_whatsapp) VALUES ('antecipado', '11999999999');
-- FaÃ§a isso para todos os setores (cadastro, posvenda, danificado, etc)
```

---

## â–¶ï¸ Iniciando o bot

1. Configure seu arquivo `db.js` com as credenciais do seu banco Oracle.
2. Inicie o bot:
   ```bash
   node index.js
   ```
3. Leia o QR Code no terminal com o WhatsApp Web do nÃºmero que serÃ¡ o BOT.

---

## ğŸ§  Comandos Suportados pelo Bot

- `Pedido` â†’ Consulta de andamento
- `Pedido Chegou` â†’ OpÃ§Ãµes de volume recebido
- `Antecipado` â†’ Envio de comprovante
- `Financeiro` â†’ Segunda via, renegociaÃ§Ã£o, atendente
- `Cadastro Cliente` â†’ Envio dos dados para cadastro
- `PÃ³s-venda`, `Volume Danificado`, `Volume Faltou`, `Outros Assuntos` â†’ Redirecionamento automÃ¡tico

---

## ğŸ§± Estrutura de Desenvolvimento
- SeparaÃ§Ã£o clara entre:
  - Controllers (fluxos principais)
  - Services (lÃ³gica de banco e serviÃ§os)
  - Config (conexÃ£o Oracle)
- CÃ³digo modular e fÃ¡cil de escalar.

---

## ğŸ“Œ Dica de ProduÃ§Ã£o
- Use o [PM2](https://pm2.keymetrics.io/) pra rodar o bot em segundo plano:
```bash
npm install -g pm2
pm run start-bot
```

---

Se quiser posso gerar tambÃ©m um `.env` e te ajudar a deixar isso pronto pra produÃ§Ã£o ğŸ˜‰
